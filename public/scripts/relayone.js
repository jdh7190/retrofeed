!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequire2478;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequire2478=a),a.register("3kfYC",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.call=e.exports.init=void 0;const n={};let r=!1;function a(e,t,n){e&&e.postMessage({relay:"relay",call:t,params:n},"*")}e.exports.init=function(e,t){r||(r=!0,window.addEventListener("message",(r=>{if(t&&r.origin!==t)return;if("relay"!==r.data.relay)return;if("reply"===r.data.call){const e=r.data.params.id;if(n.hasOwnProperty(e)){const t=n[e];return delete n[e],void t(r.data.params.payload)}}const o=r.source;if(!o)return;const s=e=>{a(o,"reply",{id:r.data.params.id,payload:e})};if(r.data.call){const t=new URL(r.origin).host;e({host:t,raw:r.origin},r.data.call,r.data.params.payload,o).then((e=>s(e))).catch((e=>{s({error:e.message||"Unknown error"})}))}})))};let o=0;e.exports.call=function(e,t,r){return new Promise((s=>{const l=++o;n[l]=s,a(e,t,r?{id:l,payload:r}:{id:l})}))}})),a.register("ipwhb",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),window._RELAY_ONE_STATE=window._RELAY_ONE_STATE||{buttonFrames:new WeakMap,buttonCallbacks:new WeakMap,modal:void 0,authFrame:void 0,subscribed:!1,iframeQueue:[],frameLoaded:!1};const n=window._RELAY_ONE_STATE;e.exports.default=n})),a.register("fIyJU",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.call=e.exports.on=e.exports.init=void 0;const n={},r={};let a=!1;function o(e,t,n){e&&e.postMessage(JSON.stringify({relay:"relay",call:t,params:n}))}e.exports.init=function(){a||(a=!0,window.onRelayApp=e=>{const t=e;if("relay"===t.relay&&"reply"===t.call){const e=t.params.id;if(r.hasOwnProperty(e)){const n=r[e];return delete r[e],void n(t.params.payload)}}})},e.exports.on=function(e,t){n[e]=n[e]||[],n[e].push(t)};let s=0;e.exports.call=function(e,t,n){return new Promise((a=>{const l=++s;r[l]=a,o(e,t,n?{id:l,payload:n}:{id:l})}))}}));var o={};Object.defineProperty(o,"__esModule",{value:!0});function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}const d=l(a("3kfYC"));var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.callAuthFrameWithUI=c.callAuthFrame=c.makeAuthIframe=c.setCallbacksForButtonFrame=c.getCallbacksForButtonFrame=c.getButtonFrameForElement=void 0;const u=i(a("ipwhb")),y=l(a("3kfYC")),f=()=>{},p=u.default.buttonFrames,m=u.default.buttonCallbacks;function w(){const e=u.default.authFrame,t=e.parentElement;e.style.border="none",t.style.border="none",t.style.overflow="hidden",e.scrolling="no",t.style.position="static",t.style.display="none"}function h(e){return new Promise(((t,n)=>{if(u.default.authFrame)return void(u.default.frameLoaded?t():u.default.iframeQueue.push(t));const r=document.createElement("div");u.default.authFrame=document.createElement("iframe"),u.default.authFrame.src=e,r.appendChild(u.default.authFrame),w(),u.default.authFrame.onload=()=>{for(u.default.frameLoaded=!0,t();u.default.iframeQueue.length;){u.default.iframeQueue.pop()()}},document.body.appendChild(r)}))}c.getButtonFrameForElement=async function(e,t){return p.has(e)||await function(e,t){return new Promise((n=>{const r=document.createElement("iframe");r.onload=n,r.src=t,r.style.border="none",r.style.width="150px",r.style.height="38px",r.style.overflow="hidden",r.scrolling="no",p.set(e,r),e.appendChild(r)}))}(e,t),p.get(e)},c.getCallbacksForButtonFrame=function(e){return m.has(e)?m.get(e):{onError:f,onPayment:f,onLoad:f}},c.setCallbacksForButtonFrame=function(e,t){m.set(e,t)},c.makeAuthIframe=h,c.callAuthFrame=async function(e,t,n){return await h(n),y.call(u.default.authFrame.contentWindow,e,t)},c.callAuthFrameWithUI=async function(e,t,n){await h(n),function(){const e=u.default.authFrame,t=e.parentElement;t.style.position="fixed",t.style.right="0",t.style.left="0",t.style.bottom="0",t.style.top="0",t.style.zIndex="9999",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.backgroundColor="rgb(0, 0, 0, 0.2)",e.style.width="340px",e.style.height="340px"}();const r=await y.call(u.default.authFrame.contentWindow,e,t);return w(),r};var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.hideModal=g.showModal=void 0;const b=i(a("ipwhb"));function E(){b.default.modal&&document.body.removeChild(b.default.modal),b.default.modal=void 0}g.showModal=async function(e){let t=!1;return b.default.modal||(t=!0,b.default.modal=document.createElement("div")),b.default.modal.style.display="flex",b.default.modal.style.justifyContent="center",b.default.modal.style.alignItems="center",b.default.modal.style.position="fixed",b.default.modal.style.top="0",b.default.modal.style.left="0",b.default.modal.style.right="0",b.default.modal.style.bottom="0",b.default.modal.style.backgroundColor="rgb(0, 0, 0, 0.2)",b.default.modal.style.zIndex="99999",b.default.modal.innerHTML="<div>"+e.replace("{HOST_PAGE_URL}",b.default.authRedirect||window.location.href)+"</div>",t&&document.body.appendChild(b.default.modal),new Promise(((e,t)=>{document.querySelectorAll(".relay-one-close").forEach((e=>{e.addEventListener("click",(()=>{E(),t(new Error("Not authorized"))}))})),document.querySelectorAll(".relay-one-download-app").forEach((e=>{e.addEventListener("click",(()=>{window.open("http://go.appurl.cc/79813781441","_blank","noopener")}))})),b.default.modal&&b.default.modal.addEventListener("click",(e=>{e.target===e.currentTarget&&(E(),t(new Error("Not authorized")))}))}))},g.hideModal=E;const v=i(a("ipwhb"));var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.initWebView=void 0;const F=l(a("fIyJU"));x.initWebView=function(e){async function t(t,n){return await F.call(e,t,n)}F.init(),F.on("error",(async(e,t)=>{console.warn("relay one error",t),e()}));const n=new WeakMap;function r(e){return n.has(e)?n.get(e):n.has(e.parentElement)?n.get(e.parentElement):null}async function a(e){const t=r(e.currentTarget),{onError:n,onPayment:a}=t,o=s(t,["onError","onPayment"]);try{const e=await window.relayone.send(Object.assign(Object.assign({},o),{prompt:!0}));a&&a(e)}catch(e){n&&n(e.message)}}const o={render:async(e,t)=>{const{onLoad:o}=t,l=s(t,["onLoad"]);let i=e;r(e)&&function(e,t){n.has(e)?n.set(e,t):n.has(e.parentElement)&&n.set(e.parentElement,t)}(e,l),"relay-2020"!==e.className&&(i=document.createElement("a"),i.innerText="Pay",i.className="relay-2020",i.style.cursor="pointer",e.appendChild(i)),i.addEventListener("click",a),n.set(i,l),o(!0)},send:async e=>{const{onError:n,onPayment:r,onLoad:a}=e,o=s(e,["onError","onPayment","onLoad"]),l=await t("send",o);if(l.error)throw new Error(l.error);return l},quote:async e=>{const{onError:n,onPayment:r,onLoad:a}=e,o=s(e,["onError","onPayment","onLoad"]),l=await t("quote",o);if(l.error)throw new Error(l.error);return l},requestIdentity:async()=>{throw console.warn("[Relay One]: requestIdentity is deprecated"),new Error("requestIdentity is not available in webview")},authBeta:async(e=!1)=>t("request-auth2",{withAllowance:e}),isLinked:async()=>!0,isApp:()=>!0,sign:async e=>{const n=await t("sign",{message:e});if(n.error)throw new Error(n.error);return n},encrypt:async(e,n,r)=>{const a=await t("encrypt",{message:e,paymail:n,encoding:r});if(a.error)throw new Error(a.error);return a},decrypt:async e=>{const n=await t("decrypt",{message:e});if(n.error)throw new Error(n.error);return n},getBalance:async()=>{const e=await t("getBalance",{});if(e.error)throw new Error(e.error);return e},getBalance2:async()=>{const e=await t("getBalance2",{});if(e.error)throw new Error(e.error);return e},errors:{isLowFunds:e=>!!e&&"Low funds"===e.message}};window.relayone=o};const L=()=>{};let k="";async function O(e,t){await _.isLinked()||await c.callAuthFrame("onboard",{},k);const n=await c.callAuthFrame(e,t,k);if(n.error)throw new Error(n.error);return n}async function P(e,t){const n=await c.callAuthFrame(e,t,k);if(n.error)throw new Error(n.error);return n}const _={p2p:!0,authRedirectUrl:e=>"string"==typeof e&&(v.default.authRedirect=e,!0),render:async(e,t)=>{const n=await c.getButtonFrameForElement(e,k),{onError:r,onPayment:a,onLoad:o}=t,l=s(t,["onError","onPayment","onLoad"]);c.setCallbacksForButtonFrame(n.contentWindow,{onError:r||L,onPayment:a||L,onLoad:o||L}),d.call(n.contentWindow,"render",l)},send:async e=>{if("string"==typeof e)return O("send",e);const{onError:t,onPayment:n,onLoad:r}=e;return O("send",s(e,["onError","onPayment","onLoad"]))},quote:async e=>{const{onError:t,onPayment:n,onLoad:r}=e;return P("quote",s(e,["onError","onPayment","onLoad"]))},requestIdentity:async()=>(console.warn("[Relay One]: requestIdentity is deprecated"),O("request-auth",{})),auth:async(e,t)=>P("auth",{paymail:e,entropy:t}),getEntropy:async()=>O("get-entropy",{}),getNextAddress:async()=>O("get-next-address",{}),logout:async()=>P("logout",{}),authBeta:async(e=!1)=>O("request-auth2",{withAllowance:e}),isLinked:async()=>P("is-linked",{}),isLegacy:async()=>O("is-legacy",{}),isApp:()=>!1,sign:async e=>O("sign",{message:e}),encrypt:async(e,t,n)=>O("encrypt",{message:e,paymail:t,encoding:n}),decrypt:async e=>O("decrypt",{message:e}),getBalance:async()=>O("getBalance",{}),getBalance2:async()=>O("getBalance2",{}),errors:{isLowFunds:e=>!!e&&"Low funds"===e.message},alpha:{dex:{getDexKey:async()=>O("dex-key",{}),pay:async e=>(console.log("dex pay",e),O("dex-pay",{tx:"string"==typeof e?e:e.serialize(!0)})),sign:async e=>(console.log("dex sign",e),O("dex-sign",{tx:"string"==typeof e?e:e.serialize(!0)})),broadcast:async e=>(console.log("dex broadcast",e),O("dex-broadcast",{tx:"string"==typeof e?e:e.serialize(!0)}))},run:{getOwner:async()=>O("run-owner",{}),getLegacyOwner:async()=>O("run-legacy-owner",{}),pay:async e=>(console.log("run pay",e),O("run-pay",{tx:"string"==typeof e?e:e.serialize(!0)})),sign:async e=>(console.log("run sign",e),O("run-sign",{tx:"string"==typeof e?e:e.serialize(!0)})),broadcast:async e=>(console.log("run broadcast",e),O("run-broadcast",{tx:"string"==typeof e?e:e.serialize(!0)}))}}};o.default=function(e,t){if(k&&k!==e)throw new Error("overriding frames is not supported");if(k=e,!v.default.subscribed){if(v.default.subscribed=!0,window.ReactNativeWebView)return void x.initWebView(window.ReactNativeWebView);if(window.relayone)return window.relayone;n=()=>c.makeAuthIframe(e),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n(),d.init((async(t,n,r,a)=>{switch(n){case"error":return void console.warn("relay one error",r);case"payment-error":return void c.getCallbacksForButtonFrame(a).onError(r);case"loaded":return void c.getCallbacksForButtonFrame(a).onLoad();case"payment":return void c.getCallbacksForButtonFrame(a).onPayment(r);case"hide-modal":return void g.hideModal();case"show-modal":return void await g.showModal(r);case"ask-allowance":return void await c.callAuthFrameWithUI("allowance",{},e);case"ask-authorization":return void await c.callAuthFrameWithUI("authorize",{},e);case"ask-run":return void await c.callAuthFrameWithUI("ask-run",r,e);case"ask-send":return void await c.callAuthFrameWithUI("ask-send",r,e);case"ask-bitcom":return void await c.callAuthFrameWithUI("ask-bitcom",r,e)}}),t)}var n;return _},function(){if(!window.relayone){const t=e(o)("https://one.relayx.io/?160","https://one.relayx.io");t&&(window.relayone=t)}}()}();
//# sourceMappingURL=relayone.js.map